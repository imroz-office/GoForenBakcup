{% extends "base.html" %}
{% load static %}

{% block start %}


<div class="content-body">
            <!-- row -->
			<div class="container-fluid">
				<div class="row">
					<div class="main-div">
						<div class="breadcrumb-wrapper breadcrumb-contacts" style="display: flex; justify-content: space-between;">
					        <div>
							<h1>Client & Vender</h1>
						     </div>
					        <div>
					            <a href="{% url 'open_add_client_page' %}" type="button" class="btn btn-primary right-sidebar-in content-sidebar-menu">
                                    <i class="bi bi-person-fill" style="font-size: 1rem;"></i> Add Client
                                </a>
                                <a type="button" class="btn btn-primary right-sidebar-in content-sidebar-menu">
                                    <i class="bi bi-funnel-fill"></i> Filter
					      	    </a>
					        </div>
				        	</div>
					</div>
				</div>
				   <div class="col-xl-12 active-p">
            <div class="tab-content" id="pills-tabContent">
                <div class="tab-pane fade show active" id="pills-colm" role="tabpanel" aria-labelledby="pills-colm-tab">
                    <div class="card">
                        <div class="card-body px-0">
                            <div class="table-responsive active-projects user-tbl  dt-filter">
                                <table id="user-tbl" class="display table">
										<thead>
											<tr>
												<!--<th>-->
												<!--	<div class="form-check custom-checkbox ms-0">-->
												<!--		<input type="checkbox" class="form-check-input" id="checkAll" required="">-->
												<!--		<label class="form-check-label" for="checkAll"></label>-->
												<!--	</div>-->
												<!--</th>-->
												<th>Company Name</th>
												<th>Client Name</th>
												<th>Mobile No.</th>
												<th>GST No.</th>
												<th>Billing Address</th>
												<th>Opening Balance</th>
												<th>Action</th>
												
											</tr>
										</thead>
										<tbody>
										    {%for i in client%}
											<tr>
												<!--<td>-->
												<!--	<div class="form-check custom-checkbox">-->
												<!--		<input type="checkbox" class="form-check-input" id="customCheckBox2" required="">-->
												<!--		<label class="form-check-label" for="customCheckBox2"></label>-->
												<!--	</div>-->
												<!--</td>-->
												<td>{{ i.company_name }}</td>
												<td>{{ i.name }}</td>
												<td>{{ i.mobile_number }}</td>
												<td>{{ i.gst_no }}</td>
												<td>{{ i.bill_add }}</td>
												<td>{{ i.ope_balance }}</td>
												<td>
													<div class="dropdown">
														<div class="btn-link" data-bs-toggle="dropdown" aria-expanded="false">
															<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
																<path d="M11 12C11 12.5523 11.4477 13 12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12Z" stroke="#737B8B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
																<path d="M18 12C18 12.5523 18.4477 13 19 13C19.5523 13 20 12.5523 20 12C20 11.4477 19.5523 11 19 11C18.4477 11 18 11.4477 18 12Z" stroke="#737B8B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
																<path d="M4 12C4 12.5523 4.44772 13 5 13C5.55228 13 6 12.5523 6 12C6 11.4477 5.55228 11 5 11C4.44772 11 4 11.4477 4 12Z" stroke="#737B8B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
															</svg>
														</div>
														<div class="dropdown-menu dropdown-menu-right" style="">
															<a class="dropdown-item" href="{% url 'open_edit_client' i.cId %}">Edit</a> 
															<li>
                                                                <a href="javascript:void(0);" class="dropdown-item" onclick="confirmDelete({{ i.cId }})">Delete</a>
                                                            </li>
														</div>
													</div>
												</td>
											</tr>
											{% endfor %}
										</tbody>
									</table>
									<div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-labelledby="confirmDeleteModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered"> <!-- Added modal-dialog-centered class -->
                                            <div class="modal-content">
                                                <div class="modal-header" style="background: #222B40;">
                                                    <h5 class="modal-title" id="confirmDeleteModalLabel" style="color: white;">Confirm Deletion</h5>
                                                    <!--<button type="button" class="btn-close" style="color: white;" data-bs-dismiss="modal" aria-label="Close"></button>-->
                                                </div>
                                                <div class="modal-body">
                                                    <p>Are you sure you want to delete this Client?</p>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                                    <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <script type="text/javascript">
                                        let comIdToDelete = null;
                                    
                                        // Function to open the modal and store the company ID to delete
                                        function confirmDelete(comId) {
                                            comIdToDelete = comId;
                                            const myModal = new bootstrap.Modal(document.getElementById('confirmDeleteModal'));
                                            myModal.show();
                                        }
                                    
                                        // When the user clicks on "Delete" in the modal
                                        document.getElementById('confirmDeleteBtn').addEventListener('click', function() {
                                            if (comIdToDelete) {
                                                // Replace with the appropriate URL to delete the company
                                                const deleteUrl = "{% url 'open_delete_client' 0 %}".replace("0", comIdToDelete);
                                                console.log(deleteUrl); // For debugging purposes
                                                window.location.href = deleteUrl;
                                            }
                                        });
                                    </script>
								</div>
							   </div>
							</div>
						
						</div>
					</div>
					</div>
				</div>
			</div>
        </div>


{% endblock %}